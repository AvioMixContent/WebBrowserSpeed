import React, { useState, useEffect } from 'react';

// Lucide Icons (assuming they are available in the environment or imported if this were a larger project)
// For this immersive, we'll use inline SVG for simplicity as direct Lucide React imports might not work without a build step.
const MailIcon = () => (
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-mail mr-1"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>
);

const FacebookIcon = () => (
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-facebook"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></svg>
);

const InstagramIcon = () => (
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-instagram"><rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/></svg>
);

// Data for each PC configuration, including browser performance scores
const configurations = {
    'config1': { // i7 13980HX, RTX 4090 laptop, 32 GB DDR5 4800 MHz
        edge: 35.5,
        chrome: 35.2,
        firefox: 26.0,
        brave: 33.6,
        opera: 32.2,
        safari: 0.0
    },
    'config2': { // 7800X3D, RTX 4080 Super, 32 GB RAM DDR5 6000 MHz @ CL 28
        edge: 34.9,
        chrome: 34.8,
        firefox: 28.5,
        brave: 34.1,
        opera: 33.5,
        safari: 0.0
    },
    'config3': { // i5 10400, 16 GB DDR5 2666 MHz
        edge: 18.3,
        chrome: 17.3,
        firefox: 14.9,
        brave: 17.1,
        opera: 16.2,
        safari: 0.0
    },
    'config4': { // i7 10750H, RTX 2070 Super laptop, 16 GB DDR5 2666 MHz
        edge: 19.0,
        chrome: 18.7,
        firefox: 15.5,
        brave: 18.5,
        opera: 17.8,
        safari: 0.0
    }
};

const App = () => {
    const [selectedConfigKey, setSelectedConfigKey] = useState('config1');
    const [browserScores, setBrowserScores] = useState([]);

    // Max score for scaling the bars
    const maxScore = 50;

    // Effect to update browser scores when selectedConfigKey changes
    useEffect(() => {
        const currentConfigData = configurations[selectedConfigKey];
        if (currentConfigData) {
            // Convert the object into an array of objects for easier mapping and sorting
            const scoresArray = Object.keys(currentConfigData).map(browserName => ({
                name: browserName,
                score: currentConfigData[browserName],
                logo: getBrowserLogo(browserName) // Helper to get logo URL
            }));

            // Sort browsers by score in descending order
            scoresArray.sort((a, b) => b.score - a.score);
            setBrowserScores(scoresArray);
        }
    }, [selectedConfigKey]); // Re-run when selectedConfigKey changes

    // Helper function to get browser logo URL
    const getBrowserLogo = (browserName) => {
        switch (browserName) {
            case 'edge':
                return 'https://upload.wikimedia.org/wikipedia/commons/thumb/9/98/Microsoft_Edge_logo_%282019%29.svg/48px-Microsoft_Edge_logo_%282019%29.svg.png';
            case 'chrome':
                return 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Google_Chrome_icon_%28September_2014%29.svg/48px-Google_Chrome_icon_%28September_2014%29.svg.png';
            case 'firefox':
                return 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/a0/Firefox_logo%2C_2019.svg/48px-Firefox_logo%2C_2019.svg.png';
            case 'brave':
                return 'https://upload.wikimedia.org/wikipedia/commons/5/51/Brave_icon_lionface.png';
            case 'opera':
                return 'https://upload.wikimedia.org/wikipedia/commons/thumb/4/49/Opera_2015_icon.svg/48px-Opera_2015_icon.svg.png';
            case 'safari':
                return 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/52/Safari_browser_logo.svg/48px-Safari_browser_logo.svg.png';
            default:
                return '';
        }
    };

    // Function to handle configuration button clicks
    const handleSelectConfiguration = (configKey) => {
        setSelectedConfigKey(configKey);
    };

    return (
        <div className="flex flex-col items-center min-h-screen">
            {/* Tailwind CSS is included via CDN in the HTML template, so no explicit import here */}
            <style>
                {`
                /* Base body styling */
                body {
                    font-family: 'Inter', sans-serif;
                    background-color: #f0f2f5; /* Lighter gray background for a modern feel */
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    min-height: 100vh;
                    padding: 1.5rem 0; /* Add some vertical padding */
                }
                /* Styling for individual browser cards */
                .browser-card {
                    background-color: #ffffff;
                    border-radius: 1.5rem; /* Even more rounded corners */
                    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.08); /* Slightly stronger, but still soft shadow */
                    padding: 1.5rem; /* Increased padding */
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    text-align: center;
                    border-width: 2px; /* Add border width */
                    transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1); /* Smoother, more pronounced transition */
                    position: relative; /* Needed for pseudo-elements for borders */
                    overflow: hidden; /* Ensures border animation stays within bounds */
                }
                /* Hover effect for browser cards */
                .browser-card:hover {
                    transform: translateY(-5px) scale(1.02); /* Lift and slight enlargement on hover */
                    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15); /* More pronounced shadow on hover */
                }

                /* Animated border effect */
                .browser-card::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    border-radius: 1.5rem;
                    padding: 2px; /* Controls the thickness of the animated border */
                    background: linear-gradient(45deg, var(--border-start-color), var(--border-end-color));
                    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
                    -webkit-mask-composite: xor;
                    mask-composite: exclude;
                    z-index: -1; /* Place behind content */
                    opacity: 0;
                    transition: opacity 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
                }

                .browser-card:hover::before {
                    opacity: 1;
                }

                /* Define custom properties for border colors */
                .browser-card.border-edge {
                    --border-start-color: #00A3A3;
                    --border-end-color: #007a7a;
                    border-color: #00A3A3;
                }
                .browser-card.border-chrome {
                    --border-start-color: #facc15;
                    --border-end-color: #eab308;
                    border-color: #facc15;
                }
                .browser-card.border-firefox {
                    --border-start-color: #f97316;
                    --border-end-color: #ea580c;
                    border-color: #f97316;
                }
                .browser-card.border-brave {
                    --border-start-color: #f59e0b;
                    --border-end-color: #d97706;
                    border-color: #f59e0b;
                }
                .browser-card.border-opera {
                    --border-start-color: #ef4444;
                    --border-end-color: #dc2626;
                    border-color: #ef4444;
                }
                .browser-card.border-safari-na {
                    --border-start-color: #94a3b8;
                    --border-end-color: #64748b;
                    border-color: #94a3b8;
                }
                .browser-card.border-safari {
                    --border-start-color: #3b82f6;
                    --border-end-color: #2563eb;
                    border-color: #3b82f6;
                }

                /* Container for horizontal browser performance bars */
                .browser-bar-horizontal-container {
                    width: 100%; /* Takes full width of the card */
                    height: 25px; /* Slightly reduced height for the horizontal bar */
                    background-color: #e2e8f0; /* Lighter gray for bar background */
                    border-radius: 0.75rem; /* More rounded corners for bar container */
                    overflow: hidden;
                    display: flex;
                    align-items: center; /* Align content vertically within the bar */
                    box-shadow: inset 0 1px 3px rgba(0,0,0,0.1); /* Inner shadow for depth */
                }
                /* Styling for the horizontal browser performance bars */
                .browser-bar-horizontal {
                    height: 100%; /* Takes full height of its container */
                    width: 0%; /* Initial width, will be set by JS */
                    background-color: #6366f1; /* Default color, overridden by specific browser classes */
                    border-radius: 0.75rem; /* Rounded corners for the bar itself */
                    transition: width 1s ease-out; /* Slower, smoother transition for width changes */
                    display: flex;
                    align-items: center;
                    justify-content: flex-end; /* Align score text to the right */
                    padding-right: 0.5rem; /* Padding for score text */
                    color: white; /* Color for score text on the bar */
                    font-weight: 600;
                    font-size: 0.875rem; /* Smaller font size for score */
                    text-shadow: 0 1px 2px rgba(0,0,0,0.2); /* Subtle text shadow */
                }
                /* Colors corresponding to browser logos for bars */
                .browser-bar-horizontal.edge { background-color: #00A3A3; }
                .browser-bar-horizontal.chrome { background-color: #facc15; }
                .browser-bar-horizontal.firefox { background-color: #f97316; }
                .browser-bar-horizontal.brave { background-color: #f59e0b; }
                .browser-bar-horizontal.opera { background-color: #ef4444; }
                .browser-bar-horizontal.safari { background-color: #3b82f6; }
                .browser-bar-horizontal.safari-na { background-color: #94a3b8; }

                /* Gradient for heading text - changed to left to right */
                .text-gradient {
                    background-image: linear-gradient(to right, #22c55e, #facc15, #f97316, #ef4444);
                    -webkit-background-clip: text;
                    background-clip: text;
                    color: transparent;
                }

                /* Button styling for navigation */
                nav button {
                    border-width: 2px !important; /* Ensure border is applied */
                    box-shadow: 0 4px 6px rgba(0,0,0,0.05); /* Subtle shadow for buttons */
                    transition: all 0.3s ease-in-out;
                    position: relative;
                    overflow: hidden;
                    z-index: 1;
                }

                nav button::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: -100%;
                    width: 100%;
                    height: 100%;
                    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
                    transition: all 0.5s ease;
                    z-index: -1;
                }

                nav button:hover::before {
                    left: 100%;
                }

                nav button.active {
                    transform: translateY(-2px);
                    box-shadow: 0 6px 12px rgba(0,0,0,0.1);
                }

                /* Specific active button colors */
                nav button.active.border-blue-500 {
                    background-color: #3b82f6; /* Blue */
                    border-color: #3b82f6;
                }
                nav button.active.border-green-700 {
                    background-color: #047857; /* Green */
                    border-color: #047857;
                }

                /* Main content container styling */
                .main-container {
                    width: 100%;
                    max-width: 4xl; /* Set to 4xl for ~900px */
                    background-color: #ffffff;
                    padding: 2.5rem; /* More generous padding */
                    border-radius: 1.5rem; /* Larger border radius */
                    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.1); /* More prominent shadow for main container */
                    margin-top: 2rem; /* Space from header */
                    margin-bottom: 2rem; /* Space before footer */
                }

                /* Responsive adjustments */
                @media (min-width: 640px) {
                    .main-container {
                        padding: 3rem;
                    }
                }
                @media (min-width: 768px) {
                    .main-container {
                        padding: 4rem;
                    }
                }
                `}
            </style>

            <header className="w-full max-w-4xl mx-auto bg-gray-900 h-10 flex items-center justify-end px-6 shadow-lg rounded-b-xl z-20">
                <div className="flex items-center space-x-3">
                    <a href="mailto:info@example.com" className="text-gray-300 flex items-center hover:text-white transition-colors text-xs sm:text-sm">
                        <MailIcon />
                        info@example.com
                    </a>
                    <a href="https://www.facebook.com/yourpage" target="_blank" className="text-gray-300 hover:text-white transition-colors">
                        <FacebookIcon />
                    </a>
                    <a href="https://www.instagram.com/yourprofile" target="_blank" className="text-gray-300 hover:text-white transition-colors">
                        <InstagramIcon />
                    </a>
                </div>
            </header>

            <div className="main-container">
                <div className="flex flex-col sm:flex-row sm:items-center justify-between mb-8">
                    <div className="flex items-center mb-6 sm:mb-0">
                        <svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 24 24" fill="none" stroke="url(#logo-gradient)" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-gauge mr-6">
                            <defs>
                                <linearGradient id="logo-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                    <stop offset="0%" style={{ stopColor: '#22c55e', stopOpacity: 1 }} />
                                    <stop offset="33%" style={{ stopColor: '#facc15', stopOpacity: 1 }} />
                                    <stop offset="66%" style={{ stopColor: '#f97316', stopOpacity: 1 }} />
                                    <stop offset="100%" style={{ stopColor: '#ef4444', stopOpacity: 1 }} />
                                </linearGradient>
                            </defs>
                            <path d="m12 14 4-4"/>
                            <path d="M3.34 19.06a10 10 0 1 1 17.32 0"/>
                        </svg>
                        <div className="flex flex-col items-start">
                            <h1 className="text-2xl sm:text-3xl font-bold leading-tight text-gray-800">Browsers Performance Overview</h1>
                            <h1 className="text-xs sm:text-sm font-bold leading-tight text-gray-800 mt-1">Speedometer 3.1</h1>
                        </div>
                    </div>
                </div>

                <nav className="w-full mb-8">
                    <ul className="flex flex-wrap justify-center gap-3">
                        {Object.keys(configurations).map(configKey => (
                            <li key={configKey} className="flex-1 min-w-[150px] max-w-[calc(50%-0.75rem)] sm:max-w-[calc(25%-0.75rem)]">
                                <button
                                    className={`w-full px-3 py-3 rounded-xl text-xs sm:text-sm font-semibold border-4 shadow-md text-center hover:scale-105 hover:shadow-xl active:scale-98 transition-all duration-300 ease-in-out
                                        ${selectedConfigKey === configKey
                                            ? (configKey === 'config2' ? 'bg-green-700 border-green-700 text-white active' : 'bg-blue-500 border-blue-500 text-white active')
                                            : (configKey === 'config2' ? 'bg-white border-green-700 text-gray-800' : 'bg-white border-blue-500 text-gray-800')
                                        }`}
                                    onClick={() => handleSelectConfiguration(configKey)}
                                >
                                    {configKey === 'config1' && <>i7 13980HX<br/>RTX 4090 laptop<br/>32 GB DDR5 4800 MHz</>}
                                    {configKey === 'config2' && <>7800X3D<br/>RTX 4080 Super<br/>32 GB DDR5 6000 MHz CL 28</>}
                                    {configKey === 'config3' && <>i5 10400<br/>-<br/>16 GB DDR5 2666 MHz</>}
                                    {configKey === 'config4' && <>i7 10750H<br/>RTX 2070 Super laptop<br/>16 GB DDR5 2666 MHz</>}
                                </button>
                            </li>
                        ))}
                    </ul>
                </nav>

                <div className="relative w-full h-48 rounded-2xl overflow-hidden shadow-xl mb-10">
                    <img src="https://placehold.co/1000x200/4a4a4a/f0f0f0?text=Optimize+your+online+experience" alt="Abstract speed background" className="absolute inset-0 w-full h-full object-cover filter brightness-75" loading="lazy"/>
                    <div className="absolute inset-0 bg-gradient-to-r from-blue-600/60 to-purple-600/60 flex flex-col items-center justify-center p-4 text-white">
                        <h2 className="text-3xl sm:text-4xl font-bold mb-2 drop-shadow-lg text-center">Discover which browser is the fastest!</h2>
                        <p className="text-base sm:text-lg text-gray-100 drop-shadow-md text-center">Our comprehensive tests reveal real performance.</p>
                    </div>
                </div>

                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8" id="browser-cards-container">
                    {browserScores.map((browser) => (
                        <div key={browser.name} className={`browser-card ${browser.name === 'safari' && browser.score === 0 ? 'border-safari-na' : `border-${browser.name}`}`} data-browser={browser.name}>
                            <img src={browser.logo} alt={`${browser.name} browser logo`} className="w-14 h-14 mb-3" onError={(e) => { e.target.onerror = null; e.target.src = `https://placehold.co/48x48/cccccc/000000?text=${browser.name}`; }} loading="lazy"/>
                            <p className="font-semibold text-xl text-gray-800 mb-3">{browser.name.charAt(0).toUpperCase() + browser.name.slice(1)}</p>
                            <div className="browser-bar-horizontal-container">
                                <div className={`browser-bar-horizontal ${browser.name === 'safari' && browser.score === 0 ? 'safari-na' : browser.name}`} style={{ width: `calc((${browser.score} / ${maxScore}) * 100%)` }}></div>
                            </div>
                            <div className="flex items-baseline mt-3">
                                <span className="font-bold text-3xl text-gray-900 mr-1">
                                    {browser.score > 0 ? browser.score.toFixed(1) : ''}
                                </span>
                                <span className="text-sm text-gray-600">
                                    {browser.score > 0 ? 'points' : '(Not available / Not tested)'}
                                </span>
                            </div>
                        </div>
                    ))}
                </div>

                <p className="text-center text-gray-500 text-sm mt-12">
                    Tested on 26.5.2025. Browser versions are always the latest as of the testing date.
                </p>
            </div>

            <footer className="w-full max-w-4xl mx-auto bg-gray-900 text-gray-300 text-center py-5 shadow-lg rounded-t-xl z-20">
                <p className="text-sm">&copy; 2025 Web Browser Speed. All rights reserved.</p>
            </footer>
        </div>
    );
};

export default App;
